!function(t){function e(){function t(t){function e(t){for(var e,r=[],a=-1,i=t.length;++a<i;)e=t[a],r.push("M",n(e.key),",",p,"V",c(e.value),"h9V",p);return r.join("")}function a(t){var e=+("e"==t),n=e?1:-1,r=p/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}var l=n.range()[1],p=c.range()[0];c.domain([0,i.top(1)[0].value]),t.each(function(){var t=d3.select(this),c=t.select("g");if(c.empty()){c=t.append("svg").attr("width",l+o.left+o.right).attr("height",p+o.top+o.bottom).append("g").attr("transform","translate("+o.left+","+o.top+")"),c.append("clipPath").attr("id","clip-"+s).append("rect").attr("width",l).attr("height",p),c.selectAll(".bar").data(["background","foreground"]).enter().append("path").attr("class",function(t){return t+" bar"}).datum(i.all()),c.selectAll(".foreground.bar").attr("clip-path","url(#clip-"+s+")"),c.append("g").attr("class","axis").attr("transform","translate(0,"+p+")").call(u);var f=c.append("g").attr("class","brush").call(d);f.selectAll("rect").attr("height",p),f.selectAll(".resize").append("path").attr("d",a)}if(r)if(r=!1,c.selectAll(".brush").call(d),d.empty())c.selectAll("#clip-"+s+" rect").attr("x",0).attr("width",l);else{var h=d.extent();c.selectAll("#clip-"+s+" rect").attr("x",n(h[0])).attr("width",n(h[1])-n(h[0]))}c.selectAll(".bar").attr("d",e)})}e.id||(e.id=0);var n,r,a,i,l,o={top:10,right:10,bottom:20,left:10},c=d3.scale.linear().range([100,0]),s=e.id++,u=d3.svg.axis().orient("bottom"),d=d3.svg.brush();return d.on("brush.chart",function(){var t=d3.select(this.parentNode),e=d.extent();l&&t.select(".brush").call(d.extent(e=e.map(l))).selectAll(".resize").style("display",null),t.select("#clip-"+s+" rect").attr("x",n(e[0])).attr("width",n(e[1])-n(e[0])),a.filterRange(e)}),d.on("brushend.chart",function(){if(d.empty()){var t=d3.select(this.parentNode.parentNode.parentNode);t.select("#clip-"+s+" rect").attr("x",null).attr("width","100%"),a.filterAll()}}),t.margin=function(e){return arguments.length?(o=e,t):o},t.x=function(e){return arguments.length?(n=e,u.scale(n),d.x(n),t):n},t.y=function(e){return arguments.length?(c=e,t):c},t.dimension=function(e){return arguments.length?(a=e,t):a},t.filter=function(e){return e?(d.extent(e),a.filterRange(e)):(d.clear(),a.filterAll()),r=!0,t},t.group=function(e){return arguments.length?(i=e,t):i},t.round=function(e){return arguments.length?(l=e,t):l},d3.rebind(t,d,"on")}function n(t){function n(t){console.log("creating dimension "+t);var e=u[t];if(h[0].hasOwnProperty(t))return t;for(var n=0;c>n;++n){var r=p[n].dimension(function(e){return e[t]}),i=r.group(function(t){var n=e.bucketSize;return Math.floor(t/n)*n});h[n][t]=r,m[n][t]=i}return f[t]={name:e.name,min:e.min,max:e.max},a(t),t}function a(t){if(!x.hasOwnProperty(t)){for(var n=f[t],r=[],a=0;c>a;++a)r.push(e().dimension(h[a][t]).group(m[a][t]).x(d3.scale.linear().domain([n.min,n.max]).rangeRound([0,10*s])));x[t]=v.length,v.push({name:n.name,charts:r})}}var i={CreateMetricDimension:n},l=d3.format(",d"),o={a:"duration",b:"usermode",c:"system calls",d:"interrupted",e:"wait-cpu",f:"wait-blocked",g:"timer",h:"network",i:"block-device",j:"user-input"},c=2,s=50,u={},d=[],p=[],f={},h=[],m=[],g=[],x={},v=[];return d3.json(t,function(t,e){e.executions.forEach(function(t){t.b=t.a*(.5+Math.random())}),e.executions.forEach(function(t){r(t,function(e){if("samples"!=e)if(u.hasOwnProperty(e)){var n=u[e];n.min=Math.min(n.min,t[e]),n.max=Math.max(n.max,t[e])}else{var n={id:e,name:o[e],min:t[e],max:t[e]};u[e]=n,d.push(n)}})}),d.forEach(function(t){t.bucketSize=(t.max-t.min)/s});for(var a=0;c>a;++a)p.push(crossfilter(e.executions)),h.push({}),m.push({}),g.push(p[a].groupAll());var i=d3.selectAll("#metric-selector").selectAll("li").data(d,function(t){return t.id}),f=i.enter().append("li");f.text(function(t){return t.name}),f.on("click",function(t){n(t.id)}),i.exit().remove(),d3.selectAll("#total").text(l(e.executions.length))}),i}function r(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n)}n.version="1.0.0",t.tracecompare=n}("undefined"!=typeof exports&&exports||this);