!function(t){function e(){function t(t){function e(t){for(var e,n=[],a=-1,i=t.length;++a<i;)e=t[a],n.push("M",r(e.key),",",f,"V",c(e.value),"h9V",f);return n.join("")}function a(t){var e=+("e"==t),r=e?1:-1,n=f/3;return"M"+.5*r+","+n+"A6,6 0 0 "+e+" "+6.5*r+","+(n+6)+"V"+(2*n-6)+"A6,6 0 0 "+e+" "+.5*r+","+2*n+"ZM"+2.5*r+","+(n+8)+"V"+(2*n-8)+"M"+4.5*r+","+(n+8)+"V"+(2*n-8)}var l=r.range()[1],f=c.range()[0];c.domain([0,i.top(1)[0].value]),t.each(function(){var t=d3.select(this),c=t.select("g");if(c.empty()){c=t.append("svg").attr("width",l+o.left+o.right).attr("height",f+o.top+o.bottom).append("g").attr("transform","translate("+o.left+","+o.top+")"),c.append("clipPath").attr("id","clip-"+u).append("rect").attr("width",l).attr("height",f),c.selectAll(".bar").data(["background","foreground"]).enter().append("path").attr("class",function(t){return t+" bar"}).datum(i.all()),c.selectAll(".foreground.bar").attr("clip-path","url(#clip-"+u+")"),c.append("g").attr("class","axis").attr("transform","translate(0,"+f+")").call(s);var d=c.append("g").attr("class","brush").call(p);d.selectAll("rect").attr("height",f),d.selectAll(".resize").append("path").attr("d",a)}if(n)if(n=!1,c.selectAll(".brush").call(p),p.empty())c.selectAll("#clip-"+u+" rect").attr("x",0).attr("width",l);else{var h=p.extent();c.selectAll("#clip-"+u+" rect").attr("x",r(h[0])).attr("width",r(h[1])-r(h[0]))}c.selectAll(".bar").attr("d",e)})}e.id||(e.id=0);var r,n,a,i,l,o={top:10,right:10,bottom:20,left:10},c=d3.scale.linear().range([100,0]),u=e.id++,s=d3.svg.axis().orient("bottom"),p=d3.svg.brush();return p.on("brush.chart",function(){var t=d3.select(this.parentNode),e=p.extent();l&&t.select(".brush").call(p.extent(e=e.map(l))).selectAll(".resize").style("display",null),t.select("#clip-"+u+" rect").attr("x",r(e[0])).attr("width",r(e[1])-r(e[0])),a.filterRange(e)}),p.on("brushend.chart",function(){if(p.empty()){var t=d3.select(this.parentNode.parentNode.parentNode);t.select("#clip-"+u+" rect").attr("x",null).attr("width","100%"),a.filterAll()}}),t.margin=function(e){return arguments.length?(o=e,t):o},t.x=function(e){return arguments.length?(r=e,s.scale(r),p.x(r),t):r},t.y=function(e){return arguments.length?(c=e,t):c},t.dimension=function(e){return arguments.length?(a=e,t):a},t.filter=function(e){return e?(p.extent(e),a.filterRange(e)):(p.clear(),a.filterAll()),n=!0,t},t.group=function(e){return arguments.length?(i=e,t):i},t.round=function(e){return arguments.length?(l=e,t):l},d3.rebind(t,p,"on")}function r(t){function r(t){var e;return n(c,function(r){c[r]==t&&(e=r)}),e}function a(t){var e=r(t);if(h[0].hasOwnProperty(e))return e;for(var n=0;u>n;++n){var a=f[n].dimension(function(t){return t[e]}),i=a.group(function(t){var r=p[e].bucketSize;return Math.floor(t/r)*r});h[n][e]=a,m[n][e]=i}return d[e]={name:c[e],min:p[e].min,max:p[e].max},e}function i(t){if(!x.hasOwnProperty(t)){for(var r=d[t],n=[],a=0;u>a;++a)n.push(e().dimension(h[a][t]).group(m[a][t]).x(d3.scale.linear().domain([r.min,r.max]).rangeRound([0,10*s])));x[t]=v.length,v.push({name:r.name,histograms:n})}}var l={CreateMetricDimension:a,CreateHistogram:i},o=d3.format(",d"),c={a:"duration",b:"usermode",c:"system calls",d:"interrupted",e:"wait-cpu",f:"wait-blocked",g:"timer",h:"network",i:"block-device",j:"user-input"},u=2,s=50,p={},f=[],d={},h=[],m=[],g=[],x={},v=[];return d3.json(t,function(t,e){e.executions.forEach(function(t){t.b=t.a*(.5+Math.random())}),e.executions.forEach(function(t){n(t,function(e){if("samples"!=e)if(p.hasOwnProperty(e)){var r=p[e];r.min=Math.min(r.min,t[e]),r.max=Math.max(r.max,t[e])}else p[e]={min:t[e],max:t[e]}})}),n(p,function(t){var e=p[t];e.bucketSize=(e.max-e.min)/s});for(var r=0;u>r;++r)f.push(crossfilter(e.executions)),h.push({}),m.push({}),g.push(f[r].groupAll());d3.selectAll("#total").text(o(e.executions.length))}),l}function n(t,e){for(var r in t)t.hasOwnProperty(r)&&e(r)}r.version="1.0.0",t.tracecompare=r}("undefined"!=typeof exports&&exports||this);